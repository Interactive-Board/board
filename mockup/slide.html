<!DOCTYPE HTML>
<html>
	<head>
		<title>Slide</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Nunito:300" rel="stylesheet">
		<link rel="stylesheet" href="slide.css">
		
		<script>
			let slides = [
				{
					title: "ICPC Competition",
					subtitle: "10/20/18",
					color: "F44336",
					description: "If you are interested in competing at the ACM ICPC (ACM International Collegiate Programming Contest: https://icpc.baylor.edu/) this year, please let me know by September 30, 2018 at the latest via email <nodari@hawaii.edu>. If there is more interest than available spots, we will hold an internal selection competition this year (most likely on Sat, Oct 20)."
				},
				{
					title: "Oath (Yahoo) Information Session",
					subtitle: "10/22/18",
					color: "3F51B5",
					description: "Oath is a diverse house of media and technology brands that engages more than a billion people around the world. The Oath portfolio includes Yahoo Sports, Yahoo Finance, Yahoo Mail, Tumblr, HuffPost, AOL.com, and more. Come join us to hear first hand from our engineers."
				},
				{
					title: "Jupyter Hackathon",
					subtitle: "11/17/18",
					color: "009F50",
					description: "The Jupyter Hackathon is this weekend. Please share with your friends and colleagues who are interested in programming, data science, data analysis, and open source. This will be a great chance to contribute to a game-changing open source project that is used by hundreds of thousands of users around the world. RSVP asap, so we can make a head count for meals."
				},
				{
					title: "WetWare Wednesday",
					subtitle: "11/28/18",
					color: "2196F3",
					description: "This November's WetWare Wednesday will be hosted by both The Association for Computing Machinery at Manoa (ACManoa) and the UHM ICS department. This month's #wetwarewed will feature an expo of both student and faculty projects at UH Manoa. Come check out their latest and greatest tech creations!"
				},
				{
					title: "By redefining, we dream",
					subtitle: "11/30/18",
					color: "9C27B0",
					description: "Who are we? Where on the great circuit will we be recreated? Throughout history, humans have been interacting with the grid via morphic resonance. We are in the midst of a zero-point awakening of transformation that will clear a path toward the grid itself."
				},
				{
					title: "The biosphere is overflowing with frequencies",
					subtitle: "1/12/19",
					color: "FFC107",
					description: "Eons from now, we messengers will grow like never before as we are re-energized by the nexus. We are being called to explore the quantum matrix itself as an interface between being and intuition. We must synergize ourselves and bless others."
				}
			];
			
			function getLuminance(r8, g8, b8) {
				// https://ux.stackexchange.com/questions/82056/how-to-measure-the-contrast-between-any-given-color-and-white
				// https://ux.stackexchange.com/questions/107318/formula-for-color-contrast-between-text-and-background
				// https://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef
				let rs = r8 / 255;
				let gs = g8 / 255;
				let bs = b8 / 255;
				let r, g, b;
				
				if (rs <= 0.03928) {
					r = rs / 12.92;
				} else {
					r = Math.pow((rs + 0.055) / 1.055, 2.4);
				}
				
				if (gs <= 0.03928) {
					g = gs / 12.92;
				} else {
					g = Math.pow((gs + 0.055) / 1.055, 2.4);
				}
				
				if (bs <= 0.03928) {
					b = bs / 12.92;
				} else {
					b = Math.pow((bs + 0.055) / 1.055, 2.4);
				}
				
				return 0.2126 * r + 0.7152 * g + 0.0722 * b;
			}
			
			function hexToRGB(hexColor) {
				let parts = /^([\dA-Fa-f]{2})([\dA-Fa-f]{2})([\dA-Fa-f]{2})$/.exec(hexColor);
				
				return parts ? {
					r: parseInt(parts[1], 16),
					g: parseInt(parts[2], 16),
					b: parseInt(parts[3], 16)
				} : undefined;
			}
			
			document.addEventListener("DOMContentLoaded", () => {
				let slideContainer = document.getElementById("slide-container");
				let timer = document.getElementById("timer");
				let slide = 0;
				let blackLuminance = getLuminance(0, 0, 0);
				let whiteLuminance = getLuminance(255, 255, 255);
				
				function change(slide) {
					let backgroundColor = hexToRGB(slide.color);
					let backgroundLuminance = getLuminance(backgroundColor.r, backgroundColor.g, backgroundColor.b);
					let blackContrast;
					let whiteContrast;
					let foregroundColor = "white";
					
					if (backgroundLuminance < blackLuminance) {
						blackContrast = (blackLuminance + 0.05) / (backgroundLuminance + 0.05);
					} else {
						blackContrast = (backgroundLuminance + 0.05) / (blackLuminance + 0.05);
					}
					if (backgroundLuminance < whiteLuminance) {
						whiteContrast = (whiteLuminance + 0.05) / (backgroundLuminance + 0.05);
					} else {
						whiteContrast = (backgroundLuminance + 0.05) / (whiteLuminance + 0.05);
					}
					
					if (blackContrast > whiteContrast) {
						foregroundColor = "black";
					}
					
					console.log(blackContrast, whiteContrast);
					
					let slideElement = document.createElement("div");
					slideElement.className = `slide ${foregroundColor}`;
					slideElement.style.left = "100vw";
					let h1 = document.createElement("h1");
					h1.innerText = slide.title;
					let h2 = document.createElement("h2");
					h2.innerText = slide.subtitle;
					let description = document.createElement("div");
					description.className = "description";
					description.innerText = slide.description;
					
					slideElement.appendChild(h1);
					slideElement.appendChild(h2);
					slideElement.appendChild(description);
					slideContainer.appendChild(slideElement);
					
					let previousSlide = slideContainer.children[0];
					
					setTimeout(() => {
						document.getElementById("idle-slides").className = foregroundColor;
						previousSlide.style.left = "-100vw";
						slideElement.style.left = "0";
						slideContainer.style.background = `#${slide.color}`;
					}, 100);
					
					let transitionListener;
					transitionListener = () => {
						slideContainer.removeChild(previousSlide);
						previousSlide.removeEventListener("transitionend", transitionListener);
						
						timer.className = "start";
					}
					previousSlide.addEventListener("transitionend", transitionListener);
				}
				
				timer.addEventListener("animationend", () => {
					slide++;
					
					if (slide >= slides.length) {
						slide = 0;
					}
					
					timer.className = "";
					
					change(slides[slide]);
				});
				
				// Start the timer
				timer.className = "start";
				
				change(slides[slide]);
			});
		</script>
	</head>
	<body>
		<div id="idle-slides" class="black">
			<div id="slide-container" style="background: #ffc107;">
				<div class="slide" style="left: 0;">
					<h1>Placeholder Content</h1>
					<h2>00/00/00</h2>
					<div class="description">Placeholder Content</div>
				</div>
			</div>
			<div id="touch">Tap to interact</div>
			<div id="timer"></div>
		</div>
	</body>
</html>
